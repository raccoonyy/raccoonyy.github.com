<!DOCTYPE html>
<html><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" version="2.0"><channel><title>celery 4 - raccoony's cave</title><description>Raccoony writes about programming, book and etc.</description><link>http://raccoonyy.github.io/</link><image><url>http://raccoonyy.github.io/favicon.png</url><title>celery 4 - raccoony's cave</title><link>http://raccoonyy.github.io/</link></image><generator>Ghost 2.19</generator><lastBuildDate>Tue, 09 Apr 2019 21:39:42 GMT</lastBuildDate><atom:link href="http://raccoonyy.github.io/tag/celery-4/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title>Celery 4.0의 주요 변경사항 정리</title><description>지난 11월 11일에 celery 4.0이 나왔습니다. 주요 변경사항을 정리해보았습니다. Python/Django 버전 지원, 사라진 기능들, 바뀐 설정 등</description><link>http://raccoonyy.github.io/whats-new-celery-4-0/</link><guid isPermaLink="false">59815cfcdd47a80001bb9efe</guid><category>python</category><category>celery 4</category><dc:creator>raccoony</dc:creator><pubDate>Wed, 16 Nov 2016 21:32:48 GMT</pubDate><media:content url="http://raccoonyy.github.io/content/images/2016/11/Screenshot-2016-11-16-16.51.45.png" medium="image"/><content:encoded>&lt;img src="http://raccoonyy.github.io/content/images/2016/11/Screenshot-2016-11-16-16.51.45.png" alt="Celery 4.0의 주요 변경사항 정리"&gt;&lt;p&gt;지난 11월 11일에 celery 4.0이 나왔습니다. (&lt;s&gt;빼빼로 데이 기념!&lt;/s&gt;)&lt;/p&gt;
&lt;p&gt;&lt;img src="http://raccoonyy.github.io/content/images/2016/11/Screenshot-2016-11-16-16.51.45.png" alt="Celery 4.0의 주요 변경사항 정리"&gt;&lt;/p&gt;
&lt;p&gt;주요 변경사항을 요약해보면 다음과 같습니다.&lt;/p&gt;
&lt;h2 id="python26"&gt;Python 2.6 이하 지원 중단&lt;/h2&gt;
&lt;p&gt;Celery 4.x는 파이썬 2를 지원하는 마지막 메이저 버전입니다. Celery 5.0 부터는 Python 3.5 이상만 지원할 예정이라고 하네요.&lt;/p&gt;
&lt;p&gt;(Celery 4.x는 Python 2.7, 3.4, 3.5를 지원하며, Celery 3.x는 Python 2.6도 지원합니다.)&lt;/p&gt;
&lt;h2 id="django1819"&gt;Django 1.8 이상 필요, 1.9 이상 권장&lt;/h2&gt;
&lt;p&gt;Django에서 Celery 4.x를 사용하려면 Django 1.8 이상이 필요합니다.&lt;/p&gt;
&lt;p&gt;또한, 새로 추가된 &lt;code&gt;transaction.on_commit&lt;/code&gt; 기능을 사용하려면 Django 1.9 이상을 사용해야한다고 하네요.&lt;/p&gt;
&lt;h2 id=""&gt;지원 중단 플랫폼&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;MS Windows&lt;/li&gt;
&lt;li&gt;Jython&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=""&gt;삭제된 기능&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;celery.task.http&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Task에서 에러 발생시 이메일 발송하던 기능&lt;/li&gt;
&lt;li&gt;&lt;code&gt;celery.contrib.batches&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="broker"&gt;broker 지원 중단&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;*&lt;/code&gt; 표시: result backend로는 사용할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Django ORM&lt;code&gt;*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;SQLAlchemy&lt;code&gt;*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CouchDB&lt;code&gt;*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;IronMQ&lt;/li&gt;
&lt;li&gt;Beanstalk&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=""&gt;설정 이름들이 소문자로 변경&lt;/h2&gt;
&lt;p&gt;예를 들어 &lt;code&gt;CELERY_MAX_CACHED_RESULTS&lt;/code&gt; 같은 설정 이름이 &lt;code&gt;result_cache_max&lt;/code&gt;로 바뀌었습니다. (&lt;a href="http://docs.celeryproject.org/en/latest/whatsnew-4.0.html#lowercase-setting-names"&gt;더 보기&lt;/a&gt;)&lt;/p&gt;
&lt;h2 id="json"&gt;기본 시리얼라이저가 Json으로 변경&lt;/h2&gt;
&lt;p&gt;pickle에서 Json으로 바뀌었습니다.&lt;/p&gt;
&lt;h2 id="task"&gt;&lt;code&gt;Task&lt;/code&gt;를 상속한 클래스가 자동으로 등록되지 않음&lt;/h2&gt;
&lt;p&gt;이전에는 &lt;code&gt;Task&lt;/code&gt;를 상속한 클래스가 태스크로 자동 등록되었지만, 앞으로는 다음과 같이 직접 등록해야 합니다.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-python"&gt;app.tasks.register(CustomTask())
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=""&gt;태스크 전달인자 개수 확인&lt;/h2&gt;
&lt;p&gt;태스크에 전달한 인자 개수가 다른 경우 &lt;code&gt;TypeError&lt;/code&gt; 예외가 발생합니다.&lt;/p&gt;
&lt;h2 id=""&gt;몇몇 콘솔용 바이너리가 사라집니다.&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;celeryd (대신 celery worker 사용)&lt;/li&gt;
&lt;li&gt;celerybeat (대신 celery beat 사용)&lt;/li&gt;
&lt;li&gt;celeryd-multi (대신 celery multi 사용)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 외에도 다양한 새 기능이 추가되었으니 &lt;a href="http://docs.celeryproject.org/en/latest/whatsnew-4.0.html#news"&gt;변경사항 문서&lt;/a&gt;를 확인해보세요. :)&lt;/p&gt;
</content:encoded></item></channel></rss></html>